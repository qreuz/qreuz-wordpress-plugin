"use strict";(self.webpackChunkqreuz_wordpress_plugin=self.webpackChunkqreuz_wordpress_plugin||[]).push([[465],{9426:function(e,t,n){n.d(t,{Z:function(){return o.Z}});var o=n(7595)},7595:function(e,t,n){n.d(t,{Z:function(){return c}});const{render:o,useState:r}=wp.element;function c(e,t,n,o){const r={action:e,qreuz_current_time:(new Date).toLocaleTimeString(),_wpnonce:qreuzEnv._wpnonce,_wp_http_referer:qreuzEnv._wp_http_referer,form:t};return void 0!==o&&(r.data=JSON.stringify(o)),async function(){var e=[];for(var t in r){var n=encodeURIComponent(t),o=encodeURIComponent(r[t]);e.push(n+"="+o)}e=e.join("&");const c=await fetch(qreuzEnv._wp_ajax_url,{method:"POST",body:e,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then((e=>{if(e.ok)return e.json();throw new Error("Server response was not OK")})).then((e=>e));return null!=c?c:'{"success": false, "msg": "response undefined"}'}()}},4865:function(e,t,n){n.d(t,{Q0:function(){return o},An:function(){return r}});const o=React.createContext(),r=React.createContext()},3465:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var o=n(9307),r=n(9426),c=n(4865);const a={tracking:void 0,pricing:void 0,woocommerce:void 0,qreuz_data:void 0,autosaving:!1};function u(e,t){let{children:n}=e;const[u,i]=React.useState(a),s={localStore:u,setLocalStore:i},{localContextLoading:l,setLocalContextLoading:p}=React.useContext(c.Q0);return React.useEffect((()=>{(async()=>{try{const e=await(0,r.Z)("qreuz_get_wp_options","all",t);if(!0!==e.success);else{let t={...u};Object.keys(e).map((n=>{t[n]=e[n]})),i(t),p(!1)}}catch(e){console.log(e)}})()}),[]),React.useEffect((()=>{if(!1===l){const e=setTimeout((function(){i({...u,autosaving:!0}),(async()=>{try{const e={tracking:u.tracking,pricing:u.pricing,qreuz_data:u.qreuz_data};(await(0,r.Z)("qreuz_update_wp_options","all",t,e)).success}catch(e){console.log(e)}})(),i({...u,autosaving:!1})}),2300);return()=>clearTimeout(e)}}),[u.tracking,u.pricing,u.woocommerce,u.qreuz_data]),(0,o.createElement)(c.An.Provider,{value:s},n)}}}]);